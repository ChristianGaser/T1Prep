<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Job {{ job.id }}</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body data-theme="dark">
  <div class="container">
    <header>
      <div>
        <h1>Job {{ job.id }}</h1>
        <p><a href="/jobs">Back to jobs</a> | <a href="/">New job</a></p>
      </div>
      <button class="theme-toggle" type="button" id="theme-toggle">Dark mode</button>
    </header>

  <div class="card meta">
    <p><strong>Status:</strong> {{ job.status }}</p>
    <p><strong>Created:</strong> {{ job.created_at }}</p>
    <p><strong>Scheduled for:</strong> {{ job.scheduled_for or "" }}</p>
    <p><strong>Started:</strong> {{ job.started_at or "" }}</p>
    <p><strong>Finished:</strong> {{ job.finished_at or "" }}</p>
    <p><strong>Return code:</strong> {{ job.return_code if job.return_code is not none else "" }}</p>
  </div>

  <h2>Command</h2>
  <pre>{{ job.command | join(' ') }}</pre>

  <h2>Log</h2>
  <pre>{{ log_content }}</pre>

  <script>
    const themeToggle = document.getElementById("theme-toggle");
    const savedTheme = localStorage.getItem("t1prep-theme") || "dark";
    document.body.setAttribute("data-theme", savedTheme);
    themeToggle.textContent = savedTheme === "dark" ? "Dark mode" : "Light mode";

    themeToggle.addEventListener("click", () => {
      const next = document.body.getAttribute("data-theme") === "dark" ? "light" : "dark";
      document.body.setAttribute("data-theme", next);
      localStorage.setItem("t1prep-theme", next);
      themeToggle.textContent = next === "dark" ? "Dark mode" : "Light mode";
    });
  </script>
  </div>
</body>
</html>
