<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>T1Prep Jobs</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body data-theme="dark">
  <div class="container">
    <header>
      <div>
        <h1>Jobs</h1>
        <p><a href="/">New job</a></p>
      </div>
      <button class="theme-toggle" type="button" id="theme-toggle">Dark mode</button>
    </header>

  {% if jobs %}
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Status</th>
          <th>Created</th>
          <th>Scheduled For</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for job in jobs %}
          <tr>
            <td>{{ job.id }}</td>
            <td>{{ job.status }}</td>
            <td>{{ job.created_at }}</td>
            <td>{{ job.scheduled_for or "" }}</td>
            <td><a href="/jobs/{{ job.id }}">Details</a></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No jobs created yet.</p>
  {% endif %}

  <script>
    const themeToggle = document.getElementById("theme-toggle");
    const savedTheme = localStorage.getItem("t1prep-theme") || "dark";
    document.body.setAttribute("data-theme", savedTheme);
    themeToggle.textContent = savedTheme === "dark" ? "Light mode" : "Dark mode";

    themeToggle.addEventListener("click", () => {
      const next = document.body.getAttribute("data-theme") === "dark" ? "light" : "dark";
      document.body.setAttribute("data-theme", next);
      localStorage.setItem("t1prep-theme", next);
      themeToggle.textContent = next === "dark" ? "Light mode" : "Dark mode";
    });
  </script>
  </div>
</body>
</html>
